// Copyright 2014 The go-ethereum Authors
// This file is part of the go-ethereum library.
//
// The go-ethereum library is free software: you can redistribute it and/or modify
// it under the terms of the GNU Lesser General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// The go-ethereum library is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
// GNU Lesser General Public License for more details.
//
// You should have received a copy of the GNU Lesser General Public License
// along with the go-ethereum library. If not, see <http://www.gnu.org/licenses/>.

package types

import (
	"bytes"
	"encoding/hex"
	"fmt"
	"gitlab.waterfall.network/waterfall/protocol/gwat/common"
	"gitlab.waterfall.network/waterfall/protocol/gwat/common/math"
	"gitlab.waterfall.network/waterfall/protocol/gwat/crypto"
	"gitlab.waterfall.network/waterfall/protocol/gwat/params"
	"gitlab.waterfall.network/waterfall/protocol/gwat/rlp"
	"golang.org/x/crypto/sha3"
	"hash"
	"math/big"
	"reflect"
	"testing"
)

// from bcValidBlockTest.json, "SimpleTx"
func TestBlockEncoding(t *testing.T) {

	bl := makeBenchBlock()
	res1, _ := rlp.EncodeToBytes(&bl)
	hexRes := hex.EncodeToString(res1)

	// Log the hex string
	fmt.Println("RLP Encoded Data in Hex:", hexRes)

	blockEnc := common.FromHex("f93b47f9022bc0808080940000000000000000000000000000000000000000a0e76b16a9ace5f9e5a6e3b319b502ef7581925ad461935f1c054479e1ed297feca04c8dc7b932b62e97d351fff64f08e5eec2b5da24d87ebe00a3cf99a1d76cf8e283bc614e8396b43f96636f6f6c65737420626c6f636b206f6e20636861696ea000000000000000000000000000000000000000000000000000000000000000008080a00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000080b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080a00000000000000000000000000000000000000000000000000000000000000000a088f6e6908029111a07c50ade9dd1ded32fb55d19bdd14ee7f96365738ca022b2831686e2f93916f8ca80830493e08301e24194000000000000000000000000000000000000000001b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0f633638bb62513a0d6a67f6b3cebe0f460f37d7463510fa439d712b2a3a4f73ea00a400a63198bbe57059050b4959d38216cba754e17fc0e7ec51a029cbaab0a80f8ca01830493e08301e24194000000000000000000000000000000000000000002b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a196c9d6f50c2d1fdde65a7698763fba90d21f62d1cb6e0c55d1e2ca7ccbff1fa033268d4dc99933c2a767170dca0631f2a6e00c63647466d21e0ffecb6123c198f8ca02830493e08301e24194000000000000000000000000000000000000000004b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a09f9b6802efd096b941757109ba5e40f0d51c7122939fcfb2cbf1740242b9aa72a01273581dd36dfae2c7cabf7d60503635e46c397e329d3cc45df99841b4eef33df8ca03830493e08301e24194000000000000000000000000000000000000000008b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a031dd0c3a3a02e6cc41609a70cb6a671691f40f4a03d34c063604030aad3cd468a01d1c8760848d792953d2ae241d56f64b5f6ae0055f1ddce18f1286456f943a36f8ca04830493e08301e24194000000000000000000000000000000000000000010b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a090eea0c3c6119c11c161bfe61366b9f05ce27b89995220c755b4b53b77a695aaa010362425419fb6933d2bacd6921ad2daed5b12d50adfebb5aaec60a3b2373a23f8ca05830493e08301e24194000000000000000000000000000000000000000020b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05894ca759de4ee796d65efbf80a6ff79bd22e5d8c17c9567dfd7b6f30149b606a06e7f6c34e104a39a5a802704630e9b19f9c6d4790d4b5f29cfb01deaa9ecd0a6f8ca06830493e08301e24194000000000000000000000000000000000000000040b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a83baa7720fbb668e2bb5572f54bfb1ca6077f27f05f194cc0f09df0212eef60a07b217945e0872a972dcb1b97a9285e44efdbec7c0b9f2a8da3ce2c5ef1f760f4f8cb07830493e08301e2419400000000000000000000000000000000000000008180b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0f3954564656b4cefc18d02e0147c905cfd2a78029033c43d9872fa08e5042f59a0781884c2a368a082ebdb544110432f22b8f17cb9fc6783cdf168f56db28f9de8f8cc08830493e08301e241940000000000000000000000000000000000000000820100b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0efd903a16cdb6075d96818a2356a82a5600520c8cc4e187ff3e20762068163fda075bcec7e6a6e97f86f5c308ad292a3af7a5e33ade067273f9791b362b4279d00f8cc09830493e08301e241940000000000000000000000000000000000000000820200b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ed04f21dfee2d15999de794da8a93a3398e3a1cd389c90d183a55c326069e345a06cfc637f04b8fbcd84deffe1793150e228a80674b6b216d2c1a96cd5ad9a94b2f8cc0a830493e08301e241940000000000000000000000000000000000000000820400b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a08d0efd08be38acc0c7bf247507f4d3d6fe68e0bc29dd46d40331fe84fc63ce30a02615214516e3924b766cfe75c228f81264f32a0de208fc13983bc01592f915b1f8cc0b830493e08301e241940000000000000000000000000000000000000000820800b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0359c550f3815b27a61094bc33fee78dc9f994505c2cced208f611b35f9082128a02b0fa57445eb9ac88ebfa46558f29140d0cfc00a489d32843fcc153302b9ec6af8cc0c830493e08301e241940000000000000000000000000000000000000000821000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a07070a692c8831272575fe88b26e106020e7b8af0a3a04959cb9105687ab9eb27a0491d845cb1036aa8d2582a8e11c5c7455f3e600135ac169c2733075c470eaa68f8cc0d830493e08301e241940000000000000000000000000000000000000000822000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04b12a85c5735176584f2a9014c285dd19f89ba3161d32f6c73e97aa57d8d9595a0606dc9499e32380d6c636b407b5a7b2739ec45ce74896fd1d546a69c292a26f0f8cc0e830493e08301e241940000000000000000000000000000000000000000824000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04c965cf9d4141dcc9b934d6a67f9faa84c6ad951a08223cc27eac14fe132b030a00f6f0832e85698385a52d903b3fb4bf8c05707016db1e73491237441d0413c95f8cc0f830493e08301e241940000000000000000000000000000000000000000828000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a03cb40953210736f783b97dd722addec20b27a40f9ea87e9ba5c66b3bb5820d95a068c7fe96dfed215359d7db3303ecd59bcc0e6bc7b578c74935cb6794a8da3c75f8cd10830493e08301e24194000000000000000000000000000000000000000083010000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a00990dd32593da54bab84a3e45bf2c1d433db0009ff68fe144eeff06dcf740b12a03c075a4a4dc4a48b174034c1f60717210c6e05ba083787a8eb4ccc112ee98ea0f8cd11830493e08301e24194000000000000000000000000000000000000000083020000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a06015a6bf78828cd18337cfee99145817786b941ea04b4a4e91f169d62567e651a03ee6fe71fbce94b35549de3d7ed0479f45b141a140488d5f3dd7e8f101077245f8cd12830493e08301e24194000000000000000000000000000000000000000083040000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04c4a6daa10f3f58e0a6183c33104c8da765176e97043e94effc265030af89376a03bb20b804777247ca6fe4a04e624993e8fabbee6e7a6356e187d3303ce36dcc9f8cd13830493e08301e24194000000000000000000000000000000000000000083080000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a08ccd4d3c8d8afb2e79e7d8ef9d98b6e8e0979d0c7b6236539acd1a942996f5a8a0187e18c286597b2af178caa80ada052501c48c836b1fc462c1c3228200c312fcf8cd14830493e08301e24194000000000000000000000000000000000000000083100000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a05c54bf9adb5fa521034b972b5d4c24bab6dfae4fefdff8051ad2bf392b5c224ea05eb7b942223726c961a3d3b148fdcced8d076f2b8902d2ea2763e0584ceae1a7f8cd15830493e08301e24194000000000000000000000000000000000000000083200000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0126d24d9d0915242956adf72d88a18177a4dd1bb8ece69419021ad241f510da9a07208848cb171211770e3003c20506277a575d7e9c6e37e6ecb378871e86c5cf2f8cd16830493e08301e24194000000000000000000000000000000000000000083400000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04ebf812bbd81a9849f7e6ac820aa2ae45b94591697998e4f45d75005c0f99a69a007419f8e8af7d7997da1be8e6f6c66a4d8054e302c79c5fc31bc76d6b188ab03f8cd17830493e08301e24194000000000000000000000000000000000000000083800000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0a4e4df0dbc54e11127a9b6a41a8aa35c6b0b7c85e8b2cedf9eccb3498b8f9d2ea02e1f1145bb8f15b6270767016dc974d4e132b7e559ed53e61793d90097adda88f8ce18830493e08301e2419400000000000000000000000000000000000000008401000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a082b25b97dd2834626fac6c8d9215b851424b7d0a2590ae51d7ed7f8392e99d2da07e55b7659642e4555cdd259166a2823403c8c0bc13d3d668cff1e5d57d9cb235f8ce19830493e08301e2419400000000000000000000000000000000000000008402000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0b2c5249e3e39e6449320f2bae77e0e617cfefd00c7fbe89546a6792f40ec153aa06f2e579b8026030b9df8eb647297acb7ec7dc2aab4bd24eb98c55aaf1d1f8730f8ce1a830493e08301e2419400000000000000000000000000000000000000008404000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05c7a5e4cc1f46d46446faac8c8c48d16447c543069c3f4b84b92facbdde5bae6a03682c8eaa2c953bb9cd176ff61b8c73eb85039051d3153e736bd891f4ba75362f8ce1b830493e08301e2419400000000000000000000000000000000000000008408000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0393e79a8d3386f523cd5a8235e1f77d8ae9724ec5cd1c696970eac3de5c72e9ba06689dbd8b76ea0fc6770d5cc167cfe460afcc78eb3f622bf82f5072f1aa3d60af8ce1c830493e08301e2419400000000000000000000000000000000000000008410000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0b6108aabd390a5f8190b5f6f20c7b81195dd449d010a41623846784744c421b0a0175718f5d9376e096920e7ddbd9c2a3c9ca59a84bb0165f4ff7639b5f4217052f8ce1d830493e08301e2419400000000000000000000000000000000000000008420000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0458a44b351afc82ad113b084b8ad94e7fec4708fefd8603ba598d8452db3a7faa056dd26337863dc4355a759d802a94428598b049aab06519970bb8e5ed92ef6c3f8ce1e830493e08301e2419400000000000000000000000000000000000000008440000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a002987afcff90c8ce31d99e569b43068134ecb2c6dbc089af8a4b0956d88c1259a059544c1856c05931d5e2090ea10908bc1856bf070607e0cb3beebd5615b341eff8ce1f830493e08301e2419400000000000000000000000000000000000000008480000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a060c80e0b38b5f9e4bbede23a8db183bbf52bc337ef5735ad9a0ca8ac4ce4b7a7a009c291206f15a626c398aa9fce5c495a00f439cf0fb80df7ba84975a08a2c23ef8cf20830493e08301e241940000000000000000000000000000000000000000850100000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0e06682eb627a4fafec4aed53a74b38e53dddf85cab73e108e57c4de613e48105a07fefeab96932d0afa6a7bb452d4255d42d57abd288da39168eca9a1a1698a81ff8cf21830493e08301e241940000000000000000000000000000000000000000850200000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0fb74e3f5f0ef84111c196ced37f2aa892344bd7ec70cfcbbea513c7c78832349a03ba0631dcf2602c7661515bd15a2c7a195abd513ca75dc70e716ed177b180e2ef8cf22830493e08301e241940000000000000000000000000000000000000000850400000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a02f4e33c9e4171d3905464c7b190a83320444e7c1d2612ab3221716e448c285b9a07f15dbbae71976bbc73636c5531e6ef7f0d71d53450442b57fe1856702892226f8cf23830493e08301e241940000000000000000000000000000000000000000850800000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a02c2b9b871fbb322c27d2a285dbe38601bf85f3191fdfa3ce97adb0e473ac460aa031b3c401e0d821936359837887db0b7e26233f20c1ecb7fab28d83b644783e27f8cf24830493e08301e241940000000000000000000000000000000000000000851000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a029187fff2624f5791e0d90c5da35a65df4ee475764600fced5f9af23a9941194a03de75c35d59a0cf8d1368df6b8c9282d9b9dea8ea239a5e31e280d900e5f95bbf8cf25830493e08301e241940000000000000000000000000000000000000000852000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a026b580bc8dc0e599f083c6f0b7bfcb7ecc9c2f0be3e71432e6bdf9e365681d47a053d3cb24a6ea6b86ecfaa957f67c7cb0ecc0fd2b93721bbfa5e90994b55551e0f8cf26830493e08301e241940000000000000000000000000000000000000000854000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a061814c696abf410a88a5c03530a8586da500f0d0857964f1ab2f5f216115e10ca0586bdce746c63c76e9880f7e0e2c7435237dc0449d6481d1ccccf633fb4da86af8cf27830493e08301e241940000000000000000000000000000000000000000858000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a02876729b9d06c6cded63bae25fefe5dd5a3a356e22317c370cd6eda2e31c14cba0653d76e1d3825a97acfa913f57a8e3e0f812f13b9bd4877157aa4ed1299976a6f8d028830493e08301e24194000000000000000000000000000000000000000086010000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0f0590123eb063c8dd5a3c3dd6afcf1cbccc0f231110bf7bf1ceb6924655a6e8ba012dd0965d9552543fff200df0330833670bd75db37601a905889175bdf247331f8d029830493e08301e24194000000000000000000000000000000000000000086020000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0bc2f3d6cd7b9ec13cd57e1d653b28e1767872d5e9cf1266a6fb44ea4e959c903a04260c4807d21bfb3182bf0055df0ecdcfef662524f8313362f9c0f63533f291af8d02a830493e08301e24194000000000000000000000000000000000000000086040000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04e8c98932069a73cf319e8fc1e3123eb16bcf648da0e0904b9d927227d2b65ffa03f07a67d72592b273594af49becff20616c743e9810ed583acffb69f3715ccd9f8d02b830493e08301e24194000000000000000000000000000000000000000086080000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0048e27e2b0778f44cad48756ac591b15d0391f6754cd24ef86f2b4059ff63ae6a018f5f55ba54ab01370b94b74916209c7b5e875a41a3c4448df10be0d0312e282f8d02c830493e08301e24194000000000000000000000000000000000000000086100000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0ea130bc5d055af778cf658d3c69af275f997022902bfd4a743e94c6ffbe3d149a04110da29461a744844f7c00d098fdcd1f49fe7f40c8ddad493ee7d8282cef2f2f8d02d830493e08301e24194000000000000000000000000000000000000000086200000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0c6b6c62c44a16d359cd7563db74f75587556f44bbb3ff857e26e22e34999d71fa072ab28366d63a7d407576f55bf0e4a72e7ed01fec099f431bf8633f908238e32f8d02e830493e08301e24194000000000000000000000000000000000000000086400000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05899016a0acd049d2a936553b082755bcb9edf973e393e5c7b339af0c1d0eeeea00ae1e5d6b6a21bed22a809f0ce3d3e051a5d690031f73b186c3b1a5b7f03925cf8d02f830493e08301e24194000000000000000000000000000000000000000086800000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0927d2280c79bdadd07b1f48d78e01ecd154cdf94a3968f774ba94e33c196e87ca0349079ae88e6d16df1a13dd0e2d77fe429662bf1e7bd19a140371eaa4e376f7cf8d130830493e08301e2419400000000000000000000000000000000000000008701000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a09c2e5bda87baab88b31b222c36a2889b9f793756193254f9b6bd862048cbb81ba006456f22537dd6036e1839c2fcc525f6688f6bbb447deb526cb57a855b22a6c2f8d131830493e08301e2419400000000000000000000000000000000000000008702000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a09d6294ddc372e5ed34953947d364b49cf2ec7556b874a5452c0c14a7e22532f1a07d5efd1543aef496f46f1aa9f3ae111c6b90edbf23447d06fd4b51fd1ad3f322f8d132830493e08301e2419400000000000000000000000000000000000000008704000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ada133b4e6081d0c87147d1bcada45cabc52be5fd31d54ba3c598e816f177701a060a49bf0c9f0ad9aa0e76d3dd6984e4c3415c9e0ec117c3f49bb78fbeb4305c8f8d133830493e08301e2419400000000000000000000000000000000000000008708000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0c2dc2dc6c2e98ab512e62542b9beeb751ee072d568ee5c4d149e97c67c6a5474a075c12337e51cc2988bc51916f8791b65970eac05876ba96406d765f63e21142ef8d134830493e08301e2419400000000000000000000000000000000000000008710000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a00b5bd30dc0b51c03cd0d39b7699dd12162fd85c8dbbbcccfae74b90bd4a59b0da026317a4493f1e827be10062dd4e5d4877f56a53541836d3f84c6065588be3749f8d135830493e08301e2419400000000000000000000000000000000000000008720000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a051b08bfe86a0aae70a3498088425552e017c30f200c5c9754a3841ec93a62e10a074146c0601a04216d8fb96ee68aaf07515a858e4f8488d9f34176e8c94f145bcf8d136830493e08301e2419400000000000000000000000000000000000000008740000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a01feeb9de53c4e192630e751fd3a977eaa22ee4131a0647df09a9b0d58f701eeda07a4ba52427be4c6c30fcf8f1e07514c9f6eb07f382a6baa8eb8a5939b700d165f8d137830493e08301e2419400000000000000000000000000000000000000008780000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a01ee637a961711347eca283253566ef18fca030b3b965727ae476b89d7a5ca94ea07e6349cd437a2db197fa5aa24fdc864f9ca8c94395e6cb655fc785cf391284fdf8d238830493e08301e241940000000000000000000000000000000000000000880100000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04476a18085ef831a83c04f8df061eb681a08e928e2561235dd6ac7cf88388403a0074df9612cbdfcdd6f93db1cd87bbb8309bbb5e717e239f4d2668366e4bf8e1bf8d239830493e08301e241940000000000000000000000000000000000000000880200000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0455bb1df84f49d3ef64cec66ed06bd6205c25794be827232302e77b5b723bd35a0299441a7d505cc8377302fc7614a7fec2087124f74f3724bf53185683f4174fcf8d13a830493e08301e241940000000000000000000000000000000000000000880400000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a959f8d4ae98776391d1a183a2f2dcd47779a926ec028884a01006ae812a213e4eca04e300b505333e7878b3eb2cf8024bf34a73ced95f93624d3e7da251cc4981fa3f8d23b830493e08301e241940000000000000000000000000000000000000000880800000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0715147e1f486a4674fc78d1312e6e036ab003dffc171ea3981387789acbdec79a037ec575836b039c9e4e5a0b2e9015ecb7134b994a702f9facb7550fa05f96481f8d23c830493e08301e241940000000000000000000000000000000000000000881000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0bbf9c7039d8db380a6323f5720a8e6172966793a790f156ec06e46b22f521e2ca0136467661821b4a2b4ec7a0a8f75bc3f2ad6e62127b4b86cd2d3838ace765222f8d23d830493e08301e241940000000000000000000000000000000000000000882000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0cc82d3e8fae524adc3368c2d2fd10618c442c59a91412e69e53419a80a237489a03b6381414f50370f42e5251b5cd5257a3cf999965d0788fb551f856accc473ddf8d23e830493e08301e241940000000000000000000000000000000000000000884000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a001fc65c4955b505e513a25a4cb003f855afd96fcdf919ff03c7993ef67efce7ba00db3c6191895aec06607b73c2e84be039617bebc8aaa226d9991cee0e7781468f8d23f830493e08301e241940000000000000000000000000000000000000000888000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a2724d067540dc75ebe2e34f6d2a39b3c4ef3a04b7df95edc76ac65d3960ba7ca012bf4972567104bb736ec8cc53f0f84ba9dd88a77c21017d60e31cf5d0de5523f8d340830493e08301e24194000000000000000000000000000000000000000089010000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a08c53c7a8783f91d2f9e8807bb2e1ecbb9af6f33640ee09066fa0ff77a3436b33a06a7dea8009fe1acc96cd10e9d174abc45e9d135aca0d35f0d73a2e8428454de9f8d341830493e08301e24194000000000000000000000000000000000000000089020000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a049e8063b67f844b4e9f5b61ab5cbc92efd4b6b5188ff2b4ccc7a4e8b7b9b1084a0385f240ab063230a08c90d708663e17e0ab7bb5ff7a95522b80860bc7072b0c2f8d342830493e08301e24194000000000000000000000000000000000000000089040000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a09bc3420e8c70903c0e45432fe44d337d2f9369fdf2cea9f2fddfa822d685af88a07565fdd15e411d412e53b21b6d1292894232496e1f72a5fcfadadb6bf71827caf8d343830493e08301e24194000000000000000000000000000000000000000089080000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ebc8eafdab40ce7cdebc4a87df2412092ae60a247b68d59ec69cfb5d4c6a0d71a07427bf79ce326eb8c887473cc66d73f8092e78676fccc4d8aa521c70cddcb62cf8d344830493e08301e24194000000000000000000000000000000000000000089100000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a06d01f87050ecec852261ffcf295182524a9d08ce7f8bfd65aaf287ff3a5f5274a03e8b24c1ae637a91efe91aba3116c768d3f779e00efa602100632101859a4586f8d345830493e08301e24194000000000000000000000000000000000000000089200000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a05355ba53134ec1aa452b081c5d471cd3d472d1a9896911092316d98112682dfaa029ddd82151c0e95629fcff0d1d26c0926fcf566f31273b178038a2bcee00c210")
	var block Block
	if err := rlp.DecodeBytes(blockEnc, &block); err != nil {
		t.Fatal("decode error: ", err)
	}

	check := func(f string, got, want interface{}) {
		if !reflect.DeepEqual(got, want) {
			t.Errorf("%s mismatch: got %v, want %v", f, got, want)
		}
	}
	check("GasLimit", block.GasLimit(), uint64(12345678))
	check("GasUsed", block.GasUsed(), uint64(1476322))
	check("Coinbase", block.Coinbase(), common.HexToAddress("0x0000000000000000000000000000000000000000"))
	check("Root", block.Root(), common.HexToHash("0x0000000000000000000000000000000000000000000000000000000000000000"))
	check("Hash", block.Hash(), common.HexToHash("0x77272a41d75425a9047a21f724e8b8b548d37e96191241874b8f521831379085"))
	check("Time", block.Time(), uint64(9876543))
	check("ParentHashes", block.ParentHashes(), common.HashArray{})
	check("Size", block.Size(), common.StorageSize(len(blockEnc)))

	common.HexToHash("0x17e44ad3bd30f5bd564d424004258f539d1d453e25f9e0a57178b47de56f1f78")
	check("len(Transactions)", len(block.Transactions()), 70)
	check("Transactions[0].Hash", block.Transactions()[0].Hash(), common.HexToHash("0x17e44ad3bd30f5bd564d424004258f539d1d453e25f9e0a57178b47de56f1f78"))
	ourBlockEnc, err := rlp.EncodeToBytes(&block)
	if err != nil {
		t.Fatal("encode error: ", err)
	}
	if !bytes.Equal(ourBlockEnc, blockEnc) {
		t.Errorf("encoded block mismatch:\ngot:  %x\nwant: %x", ourBlockEnc, blockEnc)
	}
}

func TestEIP1559BlockEncoding(t *testing.T) {
	blockEnc := common.FromHex("f93b47f9022bc0808080940000000000000000000000000000000000000000a0e76b16a9ace5f9e5a6e3b319b502ef7581925ad461935f1c054479e1ed297feca04c8dc7b932b62e97d351fff64f08e5eec2b5da24d87ebe00a3cf99a1d76cf8e283bc614e8396b43f96636f6f6c65737420626c6f636b206f6e20636861696ea000000000000000000000000000000000000000000000000000000000000000008080a00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000080b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080a00000000000000000000000000000000000000000000000000000000000000000a088f6e6908029111a07c50ade9dd1ded32fb55d19bdd14ee7f96365738ca022b2831686e2f93916f8ca80830493e08301e24194000000000000000000000000000000000000000001b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0f633638bb62513a0d6a67f6b3cebe0f460f37d7463510fa439d712b2a3a4f73ea00a400a63198bbe57059050b4959d38216cba754e17fc0e7ec51a029cbaab0a80f8ca01830493e08301e24194000000000000000000000000000000000000000002b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a196c9d6f50c2d1fdde65a7698763fba90d21f62d1cb6e0c55d1e2ca7ccbff1fa033268d4dc99933c2a767170dca0631f2a6e00c63647466d21e0ffecb6123c198f8ca02830493e08301e24194000000000000000000000000000000000000000004b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a09f9b6802efd096b941757109ba5e40f0d51c7122939fcfb2cbf1740242b9aa72a01273581dd36dfae2c7cabf7d60503635e46c397e329d3cc45df99841b4eef33df8ca03830493e08301e24194000000000000000000000000000000000000000008b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a031dd0c3a3a02e6cc41609a70cb6a671691f40f4a03d34c063604030aad3cd468a01d1c8760848d792953d2ae241d56f64b5f6ae0055f1ddce18f1286456f943a36f8ca04830493e08301e24194000000000000000000000000000000000000000010b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a090eea0c3c6119c11c161bfe61366b9f05ce27b89995220c755b4b53b77a695aaa010362425419fb6933d2bacd6921ad2daed5b12d50adfebb5aaec60a3b2373a23f8ca05830493e08301e24194000000000000000000000000000000000000000020b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05894ca759de4ee796d65efbf80a6ff79bd22e5d8c17c9567dfd7b6f30149b606a06e7f6c34e104a39a5a802704630e9b19f9c6d4790d4b5f29cfb01deaa9ecd0a6f8ca06830493e08301e24194000000000000000000000000000000000000000040b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a83baa7720fbb668e2bb5572f54bfb1ca6077f27f05f194cc0f09df0212eef60a07b217945e0872a972dcb1b97a9285e44efdbec7c0b9f2a8da3ce2c5ef1f760f4f8cb07830493e08301e2419400000000000000000000000000000000000000008180b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0f3954564656b4cefc18d02e0147c905cfd2a78029033c43d9872fa08e5042f59a0781884c2a368a082ebdb544110432f22b8f17cb9fc6783cdf168f56db28f9de8f8cc08830493e08301e241940000000000000000000000000000000000000000820100b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0efd903a16cdb6075d96818a2356a82a5600520c8cc4e187ff3e20762068163fda075bcec7e6a6e97f86f5c308ad292a3af7a5e33ade067273f9791b362b4279d00f8cc09830493e08301e241940000000000000000000000000000000000000000820200b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ed04f21dfee2d15999de794da8a93a3398e3a1cd389c90d183a55c326069e345a06cfc637f04b8fbcd84deffe1793150e228a80674b6b216d2c1a96cd5ad9a94b2f8cc0a830493e08301e241940000000000000000000000000000000000000000820400b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a08d0efd08be38acc0c7bf247507f4d3d6fe68e0bc29dd46d40331fe84fc63ce30a02615214516e3924b766cfe75c228f81264f32a0de208fc13983bc01592f915b1f8cc0b830493e08301e241940000000000000000000000000000000000000000820800b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0359c550f3815b27a61094bc33fee78dc9f994505c2cced208f611b35f9082128a02b0fa57445eb9ac88ebfa46558f29140d0cfc00a489d32843fcc153302b9ec6af8cc0c830493e08301e241940000000000000000000000000000000000000000821000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a07070a692c8831272575fe88b26e106020e7b8af0a3a04959cb9105687ab9eb27a0491d845cb1036aa8d2582a8e11c5c7455f3e600135ac169c2733075c470eaa68f8cc0d830493e08301e241940000000000000000000000000000000000000000822000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04b12a85c5735176584f2a9014c285dd19f89ba3161d32f6c73e97aa57d8d9595a0606dc9499e32380d6c636b407b5a7b2739ec45ce74896fd1d546a69c292a26f0f8cc0e830493e08301e241940000000000000000000000000000000000000000824000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04c965cf9d4141dcc9b934d6a67f9faa84c6ad951a08223cc27eac14fe132b030a00f6f0832e85698385a52d903b3fb4bf8c05707016db1e73491237441d0413c95f8cc0f830493e08301e241940000000000000000000000000000000000000000828000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a03cb40953210736f783b97dd722addec20b27a40f9ea87e9ba5c66b3bb5820d95a068c7fe96dfed215359d7db3303ecd59bcc0e6bc7b578c74935cb6794a8da3c75f8cd10830493e08301e24194000000000000000000000000000000000000000083010000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a00990dd32593da54bab84a3e45bf2c1d433db0009ff68fe144eeff06dcf740b12a03c075a4a4dc4a48b174034c1f60717210c6e05ba083787a8eb4ccc112ee98ea0f8cd11830493e08301e24194000000000000000000000000000000000000000083020000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a06015a6bf78828cd18337cfee99145817786b941ea04b4a4e91f169d62567e651a03ee6fe71fbce94b35549de3d7ed0479f45b141a140488d5f3dd7e8f101077245f8cd12830493e08301e24194000000000000000000000000000000000000000083040000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04c4a6daa10f3f58e0a6183c33104c8da765176e97043e94effc265030af89376a03bb20b804777247ca6fe4a04e624993e8fabbee6e7a6356e187d3303ce36dcc9f8cd13830493e08301e24194000000000000000000000000000000000000000083080000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a08ccd4d3c8d8afb2e79e7d8ef9d98b6e8e0979d0c7b6236539acd1a942996f5a8a0187e18c286597b2af178caa80ada052501c48c836b1fc462c1c3228200c312fcf8cd14830493e08301e24194000000000000000000000000000000000000000083100000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a05c54bf9adb5fa521034b972b5d4c24bab6dfae4fefdff8051ad2bf392b5c224ea05eb7b942223726c961a3d3b148fdcced8d076f2b8902d2ea2763e0584ceae1a7f8cd15830493e08301e24194000000000000000000000000000000000000000083200000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0126d24d9d0915242956adf72d88a18177a4dd1bb8ece69419021ad241f510da9a07208848cb171211770e3003c20506277a575d7e9c6e37e6ecb378871e86c5cf2f8cd16830493e08301e24194000000000000000000000000000000000000000083400000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04ebf812bbd81a9849f7e6ac820aa2ae45b94591697998e4f45d75005c0f99a69a007419f8e8af7d7997da1be8e6f6c66a4d8054e302c79c5fc31bc76d6b188ab03f8cd17830493e08301e24194000000000000000000000000000000000000000083800000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0a4e4df0dbc54e11127a9b6a41a8aa35c6b0b7c85e8b2cedf9eccb3498b8f9d2ea02e1f1145bb8f15b6270767016dc974d4e132b7e559ed53e61793d90097adda88f8ce18830493e08301e2419400000000000000000000000000000000000000008401000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a082b25b97dd2834626fac6c8d9215b851424b7d0a2590ae51d7ed7f8392e99d2da07e55b7659642e4555cdd259166a2823403c8c0bc13d3d668cff1e5d57d9cb235f8ce19830493e08301e2419400000000000000000000000000000000000000008402000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0b2c5249e3e39e6449320f2bae77e0e617cfefd00c7fbe89546a6792f40ec153aa06f2e579b8026030b9df8eb647297acb7ec7dc2aab4bd24eb98c55aaf1d1f8730f8ce1a830493e08301e2419400000000000000000000000000000000000000008404000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05c7a5e4cc1f46d46446faac8c8c48d16447c543069c3f4b84b92facbdde5bae6a03682c8eaa2c953bb9cd176ff61b8c73eb85039051d3153e736bd891f4ba75362f8ce1b830493e08301e2419400000000000000000000000000000000000000008408000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0393e79a8d3386f523cd5a8235e1f77d8ae9724ec5cd1c696970eac3de5c72e9ba06689dbd8b76ea0fc6770d5cc167cfe460afcc78eb3f622bf82f5072f1aa3d60af8ce1c830493e08301e2419400000000000000000000000000000000000000008410000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0b6108aabd390a5f8190b5f6f20c7b81195dd449d010a41623846784744c421b0a0175718f5d9376e096920e7ddbd9c2a3c9ca59a84bb0165f4ff7639b5f4217052f8ce1d830493e08301e2419400000000000000000000000000000000000000008420000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0458a44b351afc82ad113b084b8ad94e7fec4708fefd8603ba598d8452db3a7faa056dd26337863dc4355a759d802a94428598b049aab06519970bb8e5ed92ef6c3f8ce1e830493e08301e2419400000000000000000000000000000000000000008440000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a002987afcff90c8ce31d99e569b43068134ecb2c6dbc089af8a4b0956d88c1259a059544c1856c05931d5e2090ea10908bc1856bf070607e0cb3beebd5615b341eff8ce1f830493e08301e2419400000000000000000000000000000000000000008480000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a060c80e0b38b5f9e4bbede23a8db183bbf52bc337ef5735ad9a0ca8ac4ce4b7a7a009c291206f15a626c398aa9fce5c495a00f439cf0fb80df7ba84975a08a2c23ef8cf20830493e08301e241940000000000000000000000000000000000000000850100000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0e06682eb627a4fafec4aed53a74b38e53dddf85cab73e108e57c4de613e48105a07fefeab96932d0afa6a7bb452d4255d42d57abd288da39168eca9a1a1698a81ff8cf21830493e08301e241940000000000000000000000000000000000000000850200000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0fb74e3f5f0ef84111c196ced37f2aa892344bd7ec70cfcbbea513c7c78832349a03ba0631dcf2602c7661515bd15a2c7a195abd513ca75dc70e716ed177b180e2ef8cf22830493e08301e241940000000000000000000000000000000000000000850400000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a02f4e33c9e4171d3905464c7b190a83320444e7c1d2612ab3221716e448c285b9a07f15dbbae71976bbc73636c5531e6ef7f0d71d53450442b57fe1856702892226f8cf23830493e08301e241940000000000000000000000000000000000000000850800000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a02c2b9b871fbb322c27d2a285dbe38601bf85f3191fdfa3ce97adb0e473ac460aa031b3c401e0d821936359837887db0b7e26233f20c1ecb7fab28d83b644783e27f8cf24830493e08301e241940000000000000000000000000000000000000000851000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a029187fff2624f5791e0d90c5da35a65df4ee475764600fced5f9af23a9941194a03de75c35d59a0cf8d1368df6b8c9282d9b9dea8ea239a5e31e280d900e5f95bbf8cf25830493e08301e241940000000000000000000000000000000000000000852000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a026b580bc8dc0e599f083c6f0b7bfcb7ecc9c2f0be3e71432e6bdf9e365681d47a053d3cb24a6ea6b86ecfaa957f67c7cb0ecc0fd2b93721bbfa5e90994b55551e0f8cf26830493e08301e241940000000000000000000000000000000000000000854000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a061814c696abf410a88a5c03530a8586da500f0d0857964f1ab2f5f216115e10ca0586bdce746c63c76e9880f7e0e2c7435237dc0449d6481d1ccccf633fb4da86af8cf27830493e08301e241940000000000000000000000000000000000000000858000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a02876729b9d06c6cded63bae25fefe5dd5a3a356e22317c370cd6eda2e31c14cba0653d76e1d3825a97acfa913f57a8e3e0f812f13b9bd4877157aa4ed1299976a6f8d028830493e08301e24194000000000000000000000000000000000000000086010000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0f0590123eb063c8dd5a3c3dd6afcf1cbccc0f231110bf7bf1ceb6924655a6e8ba012dd0965d9552543fff200df0330833670bd75db37601a905889175bdf247331f8d029830493e08301e24194000000000000000000000000000000000000000086020000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0bc2f3d6cd7b9ec13cd57e1d653b28e1767872d5e9cf1266a6fb44ea4e959c903a04260c4807d21bfb3182bf0055df0ecdcfef662524f8313362f9c0f63533f291af8d02a830493e08301e24194000000000000000000000000000000000000000086040000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04e8c98932069a73cf319e8fc1e3123eb16bcf648da0e0904b9d927227d2b65ffa03f07a67d72592b273594af49becff20616c743e9810ed583acffb69f3715ccd9f8d02b830493e08301e24194000000000000000000000000000000000000000086080000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0048e27e2b0778f44cad48756ac591b15d0391f6754cd24ef86f2b4059ff63ae6a018f5f55ba54ab01370b94b74916209c7b5e875a41a3c4448df10be0d0312e282f8d02c830493e08301e24194000000000000000000000000000000000000000086100000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0ea130bc5d055af778cf658d3c69af275f997022902bfd4a743e94c6ffbe3d149a04110da29461a744844f7c00d098fdcd1f49fe7f40c8ddad493ee7d8282cef2f2f8d02d830493e08301e24194000000000000000000000000000000000000000086200000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0c6b6c62c44a16d359cd7563db74f75587556f44bbb3ff857e26e22e34999d71fa072ab28366d63a7d407576f55bf0e4a72e7ed01fec099f431bf8633f908238e32f8d02e830493e08301e24194000000000000000000000000000000000000000086400000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05899016a0acd049d2a936553b082755bcb9edf973e393e5c7b339af0c1d0eeeea00ae1e5d6b6a21bed22a809f0ce3d3e051a5d690031f73b186c3b1a5b7f03925cf8d02f830493e08301e24194000000000000000000000000000000000000000086800000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0927d2280c79bdadd07b1f48d78e01ecd154cdf94a3968f774ba94e33c196e87ca0349079ae88e6d16df1a13dd0e2d77fe429662bf1e7bd19a140371eaa4e376f7cf8d130830493e08301e2419400000000000000000000000000000000000000008701000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a09c2e5bda87baab88b31b222c36a2889b9f793756193254f9b6bd862048cbb81ba006456f22537dd6036e1839c2fcc525f6688f6bbb447deb526cb57a855b22a6c2f8d131830493e08301e2419400000000000000000000000000000000000000008702000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a09d6294ddc372e5ed34953947d364b49cf2ec7556b874a5452c0c14a7e22532f1a07d5efd1543aef496f46f1aa9f3ae111c6b90edbf23447d06fd4b51fd1ad3f322f8d132830493e08301e2419400000000000000000000000000000000000000008704000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ada133b4e6081d0c87147d1bcada45cabc52be5fd31d54ba3c598e816f177701a060a49bf0c9f0ad9aa0e76d3dd6984e4c3415c9e0ec117c3f49bb78fbeb4305c8f8d133830493e08301e2419400000000000000000000000000000000000000008708000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0c2dc2dc6c2e98ab512e62542b9beeb751ee072d568ee5c4d149e97c67c6a5474a075c12337e51cc2988bc51916f8791b65970eac05876ba96406d765f63e21142ef8d134830493e08301e2419400000000000000000000000000000000000000008710000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a00b5bd30dc0b51c03cd0d39b7699dd12162fd85c8dbbbcccfae74b90bd4a59b0da026317a4493f1e827be10062dd4e5d4877f56a53541836d3f84c6065588be3749f8d135830493e08301e2419400000000000000000000000000000000000000008720000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a051b08bfe86a0aae70a3498088425552e017c30f200c5c9754a3841ec93a62e10a074146c0601a04216d8fb96ee68aaf07515a858e4f8488d9f34176e8c94f145bcf8d136830493e08301e2419400000000000000000000000000000000000000008740000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a01feeb9de53c4e192630e751fd3a977eaa22ee4131a0647df09a9b0d58f701eeda07a4ba52427be4c6c30fcf8f1e07514c9f6eb07f382a6baa8eb8a5939b700d165f8d137830493e08301e2419400000000000000000000000000000000000000008780000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a01ee637a961711347eca283253566ef18fca030b3b965727ae476b89d7a5ca94ea07e6349cd437a2db197fa5aa24fdc864f9ca8c94395e6cb655fc785cf391284fdf8d238830493e08301e241940000000000000000000000000000000000000000880100000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04476a18085ef831a83c04f8df061eb681a08e928e2561235dd6ac7cf88388403a0074df9612cbdfcdd6f93db1cd87bbb8309bbb5e717e239f4d2668366e4bf8e1bf8d239830493e08301e241940000000000000000000000000000000000000000880200000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0455bb1df84f49d3ef64cec66ed06bd6205c25794be827232302e77b5b723bd35a0299441a7d505cc8377302fc7614a7fec2087124f74f3724bf53185683f4174fcf8d13a830493e08301e241940000000000000000000000000000000000000000880400000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a959f8d4ae98776391d1a183a2f2dcd47779a926ec028884a01006ae812a213e4eca04e300b505333e7878b3eb2cf8024bf34a73ced95f93624d3e7da251cc4981fa3f8d23b830493e08301e241940000000000000000000000000000000000000000880800000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0715147e1f486a4674fc78d1312e6e036ab003dffc171ea3981387789acbdec79a037ec575836b039c9e4e5a0b2e9015ecb7134b994a702f9facb7550fa05f96481f8d23c830493e08301e241940000000000000000000000000000000000000000881000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0bbf9c7039d8db380a6323f5720a8e6172966793a790f156ec06e46b22f521e2ca0136467661821b4a2b4ec7a0a8f75bc3f2ad6e62127b4b86cd2d3838ace765222f8d23d830493e08301e241940000000000000000000000000000000000000000882000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0cc82d3e8fae524adc3368c2d2fd10618c442c59a91412e69e53419a80a237489a03b6381414f50370f42e5251b5cd5257a3cf999965d0788fb551f856accc473ddf8d23e830493e08301e241940000000000000000000000000000000000000000884000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a001fc65c4955b505e513a25a4cb003f855afd96fcdf919ff03c7993ef67efce7ba00db3c6191895aec06607b73c2e84be039617bebc8aaa226d9991cee0e7781468f8d23f830493e08301e241940000000000000000000000000000000000000000888000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a2724d067540dc75ebe2e34f6d2a39b3c4ef3a04b7df95edc76ac65d3960ba7ca012bf4972567104bb736ec8cc53f0f84ba9dd88a77c21017d60e31cf5d0de5523f8d340830493e08301e24194000000000000000000000000000000000000000089010000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a08c53c7a8783f91d2f9e8807bb2e1ecbb9af6f33640ee09066fa0ff77a3436b33a06a7dea8009fe1acc96cd10e9d174abc45e9d135aca0d35f0d73a2e8428454de9f8d341830493e08301e24194000000000000000000000000000000000000000089020000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a049e8063b67f844b4e9f5b61ab5cbc92efd4b6b5188ff2b4ccc7a4e8b7b9b1084a0385f240ab063230a08c90d708663e17e0ab7bb5ff7a95522b80860bc7072b0c2f8d342830493e08301e24194000000000000000000000000000000000000000089040000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a09bc3420e8c70903c0e45432fe44d337d2f9369fdf2cea9f2fddfa822d685af88a07565fdd15e411d412e53b21b6d1292894232496e1f72a5fcfadadb6bf71827caf8d343830493e08301e24194000000000000000000000000000000000000000089080000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ebc8eafdab40ce7cdebc4a87df2412092ae60a247b68d59ec69cfb5d4c6a0d71a07427bf79ce326eb8c887473cc66d73f8092e78676fccc4d8aa521c70cddcb62cf8d344830493e08301e24194000000000000000000000000000000000000000089100000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a06d01f87050ecec852261ffcf295182524a9d08ce7f8bfd65aaf287ff3a5f5274a03e8b24c1ae637a91efe91aba3116c768d3f779e00efa602100632101859a4586f8d345830493e08301e24194000000000000000000000000000000000000000089200000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a05355ba53134ec1aa452b081c5d471cd3d472d1a9896911092316d98112682dfaa029ddd82151c0e95629fcff0d1d26c0926fcf566f31273b178038a2bcee00c210")
	var block Block
	if err := rlp.DecodeBytes(blockEnc, &block); err != nil {
		t.Fatal("decode error: ", err)
	}

	check := func(f string, got, want interface{}) {
		if !reflect.DeepEqual(got, want) {
			t.Errorf("%s mismatch: got %v, want %v", f, got, want)
		}
	}

	check("GasLimit", block.GasLimit(), uint64(12345678))
	check("GasUsed", block.GasUsed(), uint64(1476322))
	check("Coinbase", block.Coinbase(), common.HexToAddress("0x0000000000000000000000000000000000000000"))
	check("Root", block.Root(), common.HexToHash("0x0000000000000000000000000000000000000000000000000000000000000000"))
	check("Hash", block.Hash(), common.HexToHash("0x77272a41d75425a9047a21f724e8b8b548d37e96191241874b8f521831379085"))
	check("Time", block.Time(), uint64(9876543))
	check("Size", block.Size(), common.StorageSize(len(blockEnc)))
	check("BaseFee", block.BaseFee(), new(big.Int).SetUint64(0))

	addr := common.HexToAddress("0x0000000000000000000000000000000000000001")
	accesses := AccessList{AccessTuple{
		Address: addr,
		StorageKeys: []common.Hash{
			{0},
		},
	}}
	to := common.HexToAddress("095e7baea6a6c7c4c2dfeb977efac326af552d87")
	txdata := &DynamicFeeTx{
		ChainID:    big.NewInt(1),
		Nonce:      0,
		To:         &to,
		Gas:        123457,
		GasFeeCap:  new(big.Int).Set(block.BaseFee()),
		GasTipCap:  big.NewInt(0),
		AccessList: accesses,
		Data:       []byte{},
	}
	tx2 := NewTx(txdata)
	tx2, err := tx2.WithSignature(LatestSignerForChainID(big.NewInt(1)), common.Hex2Bytes("fe38ca4e44a30002ac54af7cf922a6ac2ba11b7d22f548e8ecb3f51f41cb31b06de6a5cbae13c0c856e33acf021b51819636cfc009d39eafb9f606d546e305a800"))
	if err != nil {
		t.Fatal("invalid signature error: ", err)
	}

	check("len(Transactions)", len(block.Transactions()), 70)
	check("Transactions[0].Hash", block.Transactions()[0].Hash(), common.HexToHash("0x17e44ad3bd30f5bd564d424004258f539d1d453e25f9e0a57178b47de56f1f78"))

	ourBlockEnc, err := rlp.EncodeToBytes(&block)
	if err != nil {
		t.Fatal("encode error: ", err)
	}
	if !bytes.Equal(ourBlockEnc, blockEnc) {
		t.Errorf("encoded block mismatch:\ngot:  %x\nwant: %x", ourBlockEnc, blockEnc)
	}
}

func TestEIP2718BlockEncoding(t *testing.T) {
	blockEnc := common.FromHex("f93b47f9022bc0808080940000000000000000000000000000000000000000a0e76b16a9ace5f9e5a6e3b319b502ef7581925ad461935f1c054479e1ed297feca04c8dc7b932b62e97d351fff64f08e5eec2b5da24d87ebe00a3cf99a1d76cf8e283bc614e8396b43f96636f6f6c65737420626c6f636b206f6e20636861696ea000000000000000000000000000000000000000000000000000000000000000008080a00000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000000080b90100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008080a00000000000000000000000000000000000000000000000000000000000000000a088f6e6908029111a07c50ade9dd1ded32fb55d19bdd14ee7f96365738ca022b2831686e2f93916f8ca80830493e08301e24194000000000000000000000000000000000000000001b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0f633638bb62513a0d6a67f6b3cebe0f460f37d7463510fa439d712b2a3a4f73ea00a400a63198bbe57059050b4959d38216cba754e17fc0e7ec51a029cbaab0a80f8ca01830493e08301e24194000000000000000000000000000000000000000002b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a196c9d6f50c2d1fdde65a7698763fba90d21f62d1cb6e0c55d1e2ca7ccbff1fa033268d4dc99933c2a767170dca0631f2a6e00c63647466d21e0ffecb6123c198f8ca02830493e08301e24194000000000000000000000000000000000000000004b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a09f9b6802efd096b941757109ba5e40f0d51c7122939fcfb2cbf1740242b9aa72a01273581dd36dfae2c7cabf7d60503635e46c397e329d3cc45df99841b4eef33df8ca03830493e08301e24194000000000000000000000000000000000000000008b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a031dd0c3a3a02e6cc41609a70cb6a671691f40f4a03d34c063604030aad3cd468a01d1c8760848d792953d2ae241d56f64b5f6ae0055f1ddce18f1286456f943a36f8ca04830493e08301e24194000000000000000000000000000000000000000010b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a090eea0c3c6119c11c161bfe61366b9f05ce27b89995220c755b4b53b77a695aaa010362425419fb6933d2bacd6921ad2daed5b12d50adfebb5aaec60a3b2373a23f8ca05830493e08301e24194000000000000000000000000000000000000000020b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05894ca759de4ee796d65efbf80a6ff79bd22e5d8c17c9567dfd7b6f30149b606a06e7f6c34e104a39a5a802704630e9b19f9c6d4790d4b5f29cfb01deaa9ecd0a6f8ca06830493e08301e24194000000000000000000000000000000000000000040b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a83baa7720fbb668e2bb5572f54bfb1ca6077f27f05f194cc0f09df0212eef60a07b217945e0872a972dcb1b97a9285e44efdbec7c0b9f2a8da3ce2c5ef1f760f4f8cb07830493e08301e2419400000000000000000000000000000000000000008180b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0f3954564656b4cefc18d02e0147c905cfd2a78029033c43d9872fa08e5042f59a0781884c2a368a082ebdb544110432f22b8f17cb9fc6783cdf168f56db28f9de8f8cc08830493e08301e241940000000000000000000000000000000000000000820100b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0efd903a16cdb6075d96818a2356a82a5600520c8cc4e187ff3e20762068163fda075bcec7e6a6e97f86f5c308ad292a3af7a5e33ade067273f9791b362b4279d00f8cc09830493e08301e241940000000000000000000000000000000000000000820200b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ed04f21dfee2d15999de794da8a93a3398e3a1cd389c90d183a55c326069e345a06cfc637f04b8fbcd84deffe1793150e228a80674b6b216d2c1a96cd5ad9a94b2f8cc0a830493e08301e241940000000000000000000000000000000000000000820400b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a08d0efd08be38acc0c7bf247507f4d3d6fe68e0bc29dd46d40331fe84fc63ce30a02615214516e3924b766cfe75c228f81264f32a0de208fc13983bc01592f915b1f8cc0b830493e08301e241940000000000000000000000000000000000000000820800b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0359c550f3815b27a61094bc33fee78dc9f994505c2cced208f611b35f9082128a02b0fa57445eb9ac88ebfa46558f29140d0cfc00a489d32843fcc153302b9ec6af8cc0c830493e08301e241940000000000000000000000000000000000000000821000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a07070a692c8831272575fe88b26e106020e7b8af0a3a04959cb9105687ab9eb27a0491d845cb1036aa8d2582a8e11c5c7455f3e600135ac169c2733075c470eaa68f8cc0d830493e08301e241940000000000000000000000000000000000000000822000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04b12a85c5735176584f2a9014c285dd19f89ba3161d32f6c73e97aa57d8d9595a0606dc9499e32380d6c636b407b5a7b2739ec45ce74896fd1d546a69c292a26f0f8cc0e830493e08301e241940000000000000000000000000000000000000000824000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04c965cf9d4141dcc9b934d6a67f9faa84c6ad951a08223cc27eac14fe132b030a00f6f0832e85698385a52d903b3fb4bf8c05707016db1e73491237441d0413c95f8cc0f830493e08301e241940000000000000000000000000000000000000000828000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a03cb40953210736f783b97dd722addec20b27a40f9ea87e9ba5c66b3bb5820d95a068c7fe96dfed215359d7db3303ecd59bcc0e6bc7b578c74935cb6794a8da3c75f8cd10830493e08301e24194000000000000000000000000000000000000000083010000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a00990dd32593da54bab84a3e45bf2c1d433db0009ff68fe144eeff06dcf740b12a03c075a4a4dc4a48b174034c1f60717210c6e05ba083787a8eb4ccc112ee98ea0f8cd11830493e08301e24194000000000000000000000000000000000000000083020000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a06015a6bf78828cd18337cfee99145817786b941ea04b4a4e91f169d62567e651a03ee6fe71fbce94b35549de3d7ed0479f45b141a140488d5f3dd7e8f101077245f8cd12830493e08301e24194000000000000000000000000000000000000000083040000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04c4a6daa10f3f58e0a6183c33104c8da765176e97043e94effc265030af89376a03bb20b804777247ca6fe4a04e624993e8fabbee6e7a6356e187d3303ce36dcc9f8cd13830493e08301e24194000000000000000000000000000000000000000083080000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a08ccd4d3c8d8afb2e79e7d8ef9d98b6e8e0979d0c7b6236539acd1a942996f5a8a0187e18c286597b2af178caa80ada052501c48c836b1fc462c1c3228200c312fcf8cd14830493e08301e24194000000000000000000000000000000000000000083100000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a05c54bf9adb5fa521034b972b5d4c24bab6dfae4fefdff8051ad2bf392b5c224ea05eb7b942223726c961a3d3b148fdcced8d076f2b8902d2ea2763e0584ceae1a7f8cd15830493e08301e24194000000000000000000000000000000000000000083200000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0126d24d9d0915242956adf72d88a18177a4dd1bb8ece69419021ad241f510da9a07208848cb171211770e3003c20506277a575d7e9c6e37e6ecb378871e86c5cf2f8cd16830493e08301e24194000000000000000000000000000000000000000083400000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04ebf812bbd81a9849f7e6ac820aa2ae45b94591697998e4f45d75005c0f99a69a007419f8e8af7d7997da1be8e6f6c66a4d8054e302c79c5fc31bc76d6b188ab03f8cd17830493e08301e24194000000000000000000000000000000000000000083800000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0a4e4df0dbc54e11127a9b6a41a8aa35c6b0b7c85e8b2cedf9eccb3498b8f9d2ea02e1f1145bb8f15b6270767016dc974d4e132b7e559ed53e61793d90097adda88f8ce18830493e08301e2419400000000000000000000000000000000000000008401000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a082b25b97dd2834626fac6c8d9215b851424b7d0a2590ae51d7ed7f8392e99d2da07e55b7659642e4555cdd259166a2823403c8c0bc13d3d668cff1e5d57d9cb235f8ce19830493e08301e2419400000000000000000000000000000000000000008402000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0b2c5249e3e39e6449320f2bae77e0e617cfefd00c7fbe89546a6792f40ec153aa06f2e579b8026030b9df8eb647297acb7ec7dc2aab4bd24eb98c55aaf1d1f8730f8ce1a830493e08301e2419400000000000000000000000000000000000000008404000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05c7a5e4cc1f46d46446faac8c8c48d16447c543069c3f4b84b92facbdde5bae6a03682c8eaa2c953bb9cd176ff61b8c73eb85039051d3153e736bd891f4ba75362f8ce1b830493e08301e2419400000000000000000000000000000000000000008408000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0393e79a8d3386f523cd5a8235e1f77d8ae9724ec5cd1c696970eac3de5c72e9ba06689dbd8b76ea0fc6770d5cc167cfe460afcc78eb3f622bf82f5072f1aa3d60af8ce1c830493e08301e2419400000000000000000000000000000000000000008410000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0b6108aabd390a5f8190b5f6f20c7b81195dd449d010a41623846784744c421b0a0175718f5d9376e096920e7ddbd9c2a3c9ca59a84bb0165f4ff7639b5f4217052f8ce1d830493e08301e2419400000000000000000000000000000000000000008420000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0458a44b351afc82ad113b084b8ad94e7fec4708fefd8603ba598d8452db3a7faa056dd26337863dc4355a759d802a94428598b049aab06519970bb8e5ed92ef6c3f8ce1e830493e08301e2419400000000000000000000000000000000000000008440000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a002987afcff90c8ce31d99e569b43068134ecb2c6dbc089af8a4b0956d88c1259a059544c1856c05931d5e2090ea10908bc1856bf070607e0cb3beebd5615b341eff8ce1f830493e08301e2419400000000000000000000000000000000000000008480000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a060c80e0b38b5f9e4bbede23a8db183bbf52bc337ef5735ad9a0ca8ac4ce4b7a7a009c291206f15a626c398aa9fce5c495a00f439cf0fb80df7ba84975a08a2c23ef8cf20830493e08301e241940000000000000000000000000000000000000000850100000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0e06682eb627a4fafec4aed53a74b38e53dddf85cab73e108e57c4de613e48105a07fefeab96932d0afa6a7bb452d4255d42d57abd288da39168eca9a1a1698a81ff8cf21830493e08301e241940000000000000000000000000000000000000000850200000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0fb74e3f5f0ef84111c196ced37f2aa892344bd7ec70cfcbbea513c7c78832349a03ba0631dcf2602c7661515bd15a2c7a195abd513ca75dc70e716ed177b180e2ef8cf22830493e08301e241940000000000000000000000000000000000000000850400000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a02f4e33c9e4171d3905464c7b190a83320444e7c1d2612ab3221716e448c285b9a07f15dbbae71976bbc73636c5531e6ef7f0d71d53450442b57fe1856702892226f8cf23830493e08301e241940000000000000000000000000000000000000000850800000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a02c2b9b871fbb322c27d2a285dbe38601bf85f3191fdfa3ce97adb0e473ac460aa031b3c401e0d821936359837887db0b7e26233f20c1ecb7fab28d83b644783e27f8cf24830493e08301e241940000000000000000000000000000000000000000851000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a029187fff2624f5791e0d90c5da35a65df4ee475764600fced5f9af23a9941194a03de75c35d59a0cf8d1368df6b8c9282d9b9dea8ea239a5e31e280d900e5f95bbf8cf25830493e08301e241940000000000000000000000000000000000000000852000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a026b580bc8dc0e599f083c6f0b7bfcb7ecc9c2f0be3e71432e6bdf9e365681d47a053d3cb24a6ea6b86ecfaa957f67c7cb0ecc0fd2b93721bbfa5e90994b55551e0f8cf26830493e08301e241940000000000000000000000000000000000000000854000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a061814c696abf410a88a5c03530a8586da500f0d0857964f1ab2f5f216115e10ca0586bdce746c63c76e9880f7e0e2c7435237dc0449d6481d1ccccf633fb4da86af8cf27830493e08301e241940000000000000000000000000000000000000000858000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a02876729b9d06c6cded63bae25fefe5dd5a3a356e22317c370cd6eda2e31c14cba0653d76e1d3825a97acfa913f57a8e3e0f812f13b9bd4877157aa4ed1299976a6f8d028830493e08301e24194000000000000000000000000000000000000000086010000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0f0590123eb063c8dd5a3c3dd6afcf1cbccc0f231110bf7bf1ceb6924655a6e8ba012dd0965d9552543fff200df0330833670bd75db37601a905889175bdf247331f8d029830493e08301e24194000000000000000000000000000000000000000086020000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0bc2f3d6cd7b9ec13cd57e1d653b28e1767872d5e9cf1266a6fb44ea4e959c903a04260c4807d21bfb3182bf0055df0ecdcfef662524f8313362f9c0f63533f291af8d02a830493e08301e24194000000000000000000000000000000000000000086040000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a04e8c98932069a73cf319e8fc1e3123eb16bcf648da0e0904b9d927227d2b65ffa03f07a67d72592b273594af49becff20616c743e9810ed583acffb69f3715ccd9f8d02b830493e08301e24194000000000000000000000000000000000000000086080000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0048e27e2b0778f44cad48756ac591b15d0391f6754cd24ef86f2b4059ff63ae6a018f5f55ba54ab01370b94b74916209c7b5e875a41a3c4448df10be0d0312e282f8d02c830493e08301e24194000000000000000000000000000000000000000086100000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0ea130bc5d055af778cf658d3c69af275f997022902bfd4a743e94c6ffbe3d149a04110da29461a744844f7c00d098fdcd1f49fe7f40c8ddad493ee7d8282cef2f2f8d02d830493e08301e24194000000000000000000000000000000000000000086200000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0c6b6c62c44a16d359cd7563db74f75587556f44bbb3ff857e26e22e34999d71fa072ab28366d63a7d407576f55bf0e4a72e7ed01fec099f431bf8633f908238e32f8d02e830493e08301e24194000000000000000000000000000000000000000086400000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a05899016a0acd049d2a936553b082755bcb9edf973e393e5c7b339af0c1d0eeeea00ae1e5d6b6a21bed22a809f0ce3d3e051a5d690031f73b186c3b1a5b7f03925cf8d02f830493e08301e24194000000000000000000000000000000000000000086800000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0927d2280c79bdadd07b1f48d78e01ecd154cdf94a3968f774ba94e33c196e87ca0349079ae88e6d16df1a13dd0e2d77fe429662bf1e7bd19a140371eaa4e376f7cf8d130830493e08301e2419400000000000000000000000000000000000000008701000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a09c2e5bda87baab88b31b222c36a2889b9f793756193254f9b6bd862048cbb81ba006456f22537dd6036e1839c2fcc525f6688f6bbb447deb526cb57a855b22a6c2f8d131830493e08301e2419400000000000000000000000000000000000000008702000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a09d6294ddc372e5ed34953947d364b49cf2ec7556b874a5452c0c14a7e22532f1a07d5efd1543aef496f46f1aa9f3ae111c6b90edbf23447d06fd4b51fd1ad3f322f8d132830493e08301e2419400000000000000000000000000000000000000008704000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ada133b4e6081d0c87147d1bcada45cabc52be5fd31d54ba3c598e816f177701a060a49bf0c9f0ad9aa0e76d3dd6984e4c3415c9e0ec117c3f49bb78fbeb4305c8f8d133830493e08301e2419400000000000000000000000000000000000000008708000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0c2dc2dc6c2e98ab512e62542b9beeb751ee072d568ee5c4d149e97c67c6a5474a075c12337e51cc2988bc51916f8791b65970eac05876ba96406d765f63e21142ef8d134830493e08301e2419400000000000000000000000000000000000000008710000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a00b5bd30dc0b51c03cd0d39b7699dd12162fd85c8dbbbcccfae74b90bd4a59b0da026317a4493f1e827be10062dd4e5d4877f56a53541836d3f84c6065588be3749f8d135830493e08301e2419400000000000000000000000000000000000000008720000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a051b08bfe86a0aae70a3498088425552e017c30f200c5c9754a3841ec93a62e10a074146c0601a04216d8fb96ee68aaf07515a858e4f8488d9f34176e8c94f145bcf8d136830493e08301e2419400000000000000000000000000000000000000008740000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a01feeb9de53c4e192630e751fd3a977eaa22ee4131a0647df09a9b0d58f701eeda07a4ba52427be4c6c30fcf8f1e07514c9f6eb07f382a6baa8eb8a5939b700d165f8d137830493e08301e2419400000000000000000000000000000000000000008780000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a01ee637a961711347eca283253566ef18fca030b3b965727ae476b89d7a5ca94ea07e6349cd437a2db197fa5aa24fdc864f9ca8c94395e6cb655fc785cf391284fdf8d238830493e08301e241940000000000000000000000000000000000000000880100000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a04476a18085ef831a83c04f8df061eb681a08e928e2561235dd6ac7cf88388403a0074df9612cbdfcdd6f93db1cd87bbb8309bbb5e717e239f4d2668366e4bf8e1bf8d239830493e08301e241940000000000000000000000000000000000000000880200000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0455bb1df84f49d3ef64cec66ed06bd6205c25794be827232302e77b5b723bd35a0299441a7d505cc8377302fc7614a7fec2087124f74f3724bf53185683f4174fcf8d13a830493e08301e241940000000000000000000000000000000000000000880400000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a959f8d4ae98776391d1a183a2f2dcd47779a926ec028884a01006ae812a213e4eca04e300b505333e7878b3eb2cf8024bf34a73ced95f93624d3e7da251cc4981fa3f8d23b830493e08301e241940000000000000000000000000000000000000000880800000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0715147e1f486a4674fc78d1312e6e036ab003dffc171ea3981387789acbdec79a037ec575836b039c9e4e5a0b2e9015ecb7134b994a702f9facb7550fa05f96481f8d23c830493e08301e241940000000000000000000000000000000000000000881000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0bbf9c7039d8db380a6323f5720a8e6172966793a790f156ec06e46b22f521e2ca0136467661821b4a2b4ec7a0a8f75bc3f2ad6e62127b4b86cd2d3838ace765222f8d23d830493e08301e241940000000000000000000000000000000000000000882000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0cc82d3e8fae524adc3368c2d2fd10618c442c59a91412e69e53419a80a237489a03b6381414f50370f42e5251b5cd5257a3cf999965d0788fb551f856accc473ddf8d23e830493e08301e241940000000000000000000000000000000000000000884000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a001fc65c4955b505e513a25a4cb003f855afd96fcdf919ff03c7993ef67efce7ba00db3c6191895aec06607b73c2e84be039617bebc8aaa226d9991cee0e7781468f8d23f830493e08301e241940000000000000000000000000000000000000000888000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a0a2724d067540dc75ebe2e34f6d2a39b3c4ef3a04b7df95edc76ac65d3960ba7ca012bf4972567104bb736ec8cc53f0f84ba9dd88a77c21017d60e31cf5d0de5523f8d340830493e08301e24194000000000000000000000000000000000000000089010000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a08c53c7a8783f91d2f9e8807bb2e1ecbb9af6f33640ee09066fa0ff77a3436b33a06a7dea8009fe1acc96cd10e9d174abc45e9d135aca0d35f0d73a2e8428454de9f8d341830493e08301e24194000000000000000000000000000000000000000089020000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a049e8063b67f844b4e9f5b61ab5cbc92efd4b6b5188ff2b4ccc7a4e8b7b9b1084a0385f240ab063230a08c90d708663e17e0ab7bb5ff7a95522b80860bc7072b0c2f8d342830493e08301e24194000000000000000000000000000000000000000089040000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a09bc3420e8c70903c0e45432fe44d337d2f9369fdf2cea9f2fddfa822d685af88a07565fdd15e411d412e53b21b6d1292894232496e1f72a5fcfadadb6bf71827caf8d343830493e08301e24194000000000000000000000000000000000000000089080000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a0ebc8eafdab40ce7cdebc4a87df2412092ae60a247b68d59ec69cfb5d4c6a0d71a07427bf79ce326eb8c887473cc66d73f8092e78676fccc4d8aa521c70cddcb62cf8d344830493e08301e24194000000000000000000000000000000000000000089100000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a95a06d01f87050ecec852261ffcf295182524a9d08ce7f8bfd65aaf287ff3a5f5274a03e8b24c1ae637a91efe91aba3116c768d3f779e00efa602100632101859a4586f8d345830493e08301e24194000000000000000000000000000000000000000089200000000000000000b86400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000820a96a05355ba53134ec1aa452b081c5d471cd3d472d1a9896911092316d98112682dfaa029ddd82151c0e95629fcff0d1d26c0926fcf566f31273b178038a2bcee00c210")
	var block Block
	if err := rlp.DecodeBytes(blockEnc, &block); err != nil {
		t.Fatal("decode error: ", err)
	}

	check := func(f string, got, want interface{}) {
		if !reflect.DeepEqual(got, want) {
			t.Errorf("%s mismatch: got %v, want %v", f, got, want)
		}
	}
	check("GasLimit", block.GasLimit(), uint64(12345678))
	check("GasUsed", block.GasUsed(), uint64(1476322))
	check("Coinbase", block.Coinbase(), common.HexToAddress("0x0000000000000000000000000000000000000000"))
	check("Root", block.Root(), common.HexToHash("0x0000000000000000000000000000000000000000000000000000000000000000"))
	check("Time", block.Time(), uint64(9876543))
	check("Size", block.Size(), common.StorageSize(len(blockEnc)))

	// Create legacy tx.
	to := common.HexToAddress("095e7baea6a6c7c4c2dfeb977efac326af552d87")
	tx1 := NewTx(&LegacyTx{
		Nonce:    0,
		To:       &to,
		Value:    big.NewInt(10),
		Gas:      50000,
		GasPrice: big.NewInt(10),
	})
	sig := common.Hex2Bytes("9bea4c4daac7c7c52e093e6a4c35dbbcf8856f1af7b059ba20253e70848d094f8a8fae537ce25ed8cb5af9adac3f141af69bd515bd2ba031522df09b97dd72b100")
	tx1, _ = tx1.WithSignature(HomesteadSigner{}, sig)

	// Create ACL tx.
	addr := common.HexToAddress("0x0000000000000000000000000000000000000001")
	tx2 := NewTx(&AccessListTx{
		ChainID:    big.NewInt(1),
		Nonce:      0,
		To:         &to,
		Gas:        123457,
		GasPrice:   big.NewInt(10),
		AccessList: AccessList{{Address: addr, StorageKeys: []common.Hash{{0}}}},
	})
	sig2 := common.Hex2Bytes("3dbacc8d0259f2508625e97fdfc57cd85fdd16e5821bc2c10bdd1a52649e8335476e10695b183a87b0aa292a7f4b78ef0c3fbe62aa2c42c84e1d9c3da159ef1401")
	tx2, _ = tx2.WithSignature(NewEIP2930Signer(big.NewInt(1)), sig2)

	check("len(Transactions)", len(block.Transactions()), 70)
	check("Transactions[0].Hash", block.Transactions()[0].Hash(), common.HexToHash("0x17e44ad3bd30f5bd564d424004258f539d1d453e25f9e0a57178b47de56f1f78"))

	ourBlockEnc, err := rlp.EncodeToBytes(&block)
	if err != nil {
		t.Fatal("encode error: ", err)
	}
	if !bytes.Equal(ourBlockEnc, blockEnc) {
		t.Errorf("encoded block mismatch:\ngot:  %x\nwant: %x", ourBlockEnc, blockEnc)
	}
}

var benchBuffer = bytes.NewBuffer(make([]byte, 0, 32000))

func BenchmarkEncodeBlock(b *testing.B) {
	block := makeBenchBlock()
	b.ResetTimer()

	for i := 0; i < b.N; i++ {
		benchBuffer.Reset()
		if err := rlp.Encode(benchBuffer, block); err != nil {
			b.Fatal(err)
		}
	}
}

// testHasher is the helper tool for transaction/receipt list hashing.
// The original hasher is trie, in order to get rid of import cycle,
// use the testing hasher instead.
type testHasher struct {
	hasher hash.Hash
}

func newHasher() *testHasher {
	return &testHasher{hasher: sha3.NewLegacyKeccak256()}
}

func (h *testHasher) Reset() {
	h.hasher.Reset()
}

func (h *testHasher) Update(key, val []byte) {
	h.hasher.Write(key)
	h.hasher.Write(val)
}

func (h *testHasher) Hash() common.Hash {
	return common.BytesToHash(h.hasher.Sum(nil))
}

func makeBenchBlock() *Block {
	var (
		key, _   = crypto.GenerateKey()
		txs      = make([]*Transaction, 70)
		receipts = make([]*Receipt, len(txs))
		signer   = LatestSigner(params.TestChainConfig)
		uncles   = make([]*Header, 3)
	)
	header := &Header{
		GasLimit:     12345678,
		GasUsed:      1476322,
		Time:         9876543,
		Extra:        []byte("coolest block on chain"),
		ParentHashes: common.HashArray{},
	}
	for i := range txs {
		amount := math.BigPow(2, int64(i))
		price := big.NewInt(300000)
		data := make([]byte, 100)
		tx := NewTransaction(uint64(i), common.Address{}, amount, 123457, price, data)
		signedTx, err := SignTx(tx, signer, key)
		if err != nil {
			panic(err)
		}
		txs[i] = signedTx
		receipts[i] = NewReceipt(make([]byte, 32), false, tx.Gas())
	}
	for i := range uncles {
		uncles[i] = &Header{
			GasLimit: 12345678,
			GasUsed:  1476322,
			Time:     9876543,
			Extra:    []byte("benchmark uncle"),
		}
	}
	return NewBlock(header, txs, receipts, newHasher())
}
